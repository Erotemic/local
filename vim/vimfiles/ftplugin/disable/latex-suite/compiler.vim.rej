***************
*** 343,352 ****
  	
  	" inverse search tips taken from Dimitri Antoniou's tip and Benji Fisher's
  	" tips on vim.sf.net (vim.sf.net tip #225)
! 	if (has('win32') && (viewer == "yap" || viewer == "YAP" || viewer == "Yap"))
  
! 		let execString = 'silent! !start '. viewer.' -s '.line('.').expand('%').' '.mainfnameRoot
  
  
  	elseif (has('macunix') && (viewer == "Skim" || viewer == "PDFView" || viewer == "TeXniscope"))
  		" We're on a Mac using a traditional Mac viewer
--- 348,367 ----
  	
  	" inverse search tips taken from Dimitri Antoniou's tip and Benji Fisher's
  	" tips on vim.sf.net (vim.sf.net tip #225)
! 	if (has('win32') && (viewer == "yap" || viewer == "YAP" || viewer == "Yap" || viewer =~? "^sumatrapdf"))
! 
! 		if (viewer == "yap" || viewer == "YAP" || viewer == "Yap")
  
! 			let execString = 'silent! !start '. viewer.' -s '.line('.').expand('%').' '.mainfnameRoot
  
+ 		elseif viewer =~? "^sumatrapdf"
+ 			
+ 			" SumatraPDF requires the .tex file path to be given relatively to
+ 			" the main file path, hence the substitute
+ 			let relativeFile=substitute(expand("%:p"), Tex_GetMainFileName(':p:h').'/', '','')
+ 			let execString = 'silent! !'.s:path.'/fwdsumatra.py "'.mainfnameFull.'.'.s:target.'" "'.relativeFile.'" '. line('.')
+ 
+ 		endif
  
  	elseif (has('macunix') && (viewer == "Skim" || viewer == "PDFView" || viewer == "TeXniscope"))
  		" We're on a Mac using a traditional Mac viewer
